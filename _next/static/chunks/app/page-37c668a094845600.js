(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1919:function(e,r,n){Promise.resolve().then(n.bind(n,15403))},96210:function(e,r,n){"use strict";n.r(r),n.d(r,{LanguageProvider:function(){return i},useLanguage:function(){return o}});var t=n(57437),l=n(2265);let a=(0,l.createContext)(void 0);function i(e){let{children:r}=e,[n,i]=(0,l.useState)("en");return(0,l.useEffect)(()=>{let e=localStorage.getItem("language");e&&("en"===e||"fr"===e)&&i(e)},[]),(0,l.useEffect)(()=>{localStorage.setItem("language",n)},[n]),(0,t.jsx)(a.Provider,{value:{language:n,setLanguage:i,availableLanguages:["en","fr"]},children:r})}function o(){let e=(0,l.useContext)(a);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},15403:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return D}});var t=n(57437),l=n(2265),a=n(68395),i=n(6882),o=n(43226),s=n(79245),d=n(57852),c=n(28874),u=n(21975),x=n(52653),g=n(33546),h=n(2510),f=n(60599),m=n(27739),v=n(49050),b=n(47827),y=n(82057),p=n(15873),j=n(58768),Z=n(41560),k=n(70001),C=n(24033),w=n(29996),S=n(25529),I=n(99929),E=n(51099);function A(e,r,n){var t;let l=n||{};if(0===Object.keys(l).length&&(null==e?void 0:null===(t=e.captureBase)||void 0===t?void 0:t.attributes)){let r=e.captureBase.attributes;Array.isArray(r)?r.forEach(e=>{(null==e?void 0:e.name)&&(l[e.name]="........")}):"object"==typeof r&&Object.keys(r).forEach(e=>{l[e]="........"})}return 0===Object.keys(l).length&&(l={placeholder:"sample"}),new S.CredentialExchangeRecord({threadId:"simple-".concat(r.id),protocolVersion:"1.0",state:S.CredentialState.OfferReceived,credentialAttributes:Object.entries(l).map(e=>{let[r,n]=e;return new S.CredentialPreviewAttribute({name:r,value:n})})})}function L(e){let{overlay:r,watermarkText:n,bundle:t}=e,a=(0,E.bV)();return(0,l.useEffect)(()=>{var e,t,l,i,o,s,d;if(!a||!(null==r?void 0:r.branding))return;let c=(e=>{var r,n,t,l,a,i;let o=[null==e?void 0:null===(r=e.branding)||void 0===r?void 0:r.watermarkText,null==e?void 0:null===(n=e.branding)||void 0===n?void 0:n.watermark,null==e?void 0:null===(t=e.metadata)||void 0===t?void 0:t.watermarkText,null==e?void 0:null===(a=e.metadata)||void 0===a?void 0:null===(l=a.watermark)||void 0===l?void 0:l.text,null==e?void 0:null===(i=e.metadata)||void 0===i?void 0:i.watermark,null==e?void 0:e.watermark];for(let e of o)if(null!=e){if("string"==typeof e){if(e.trim())return e;continue}if(Array.isArray(e)&&e.length&&e.every(e=>"string"==typeof e)){let r=e.join(" ");if(r.trim())return r;continue}if("object"==typeof e&&null!==e){let r=Object.entries(e),n=r.filter(e=>{let[r,n]=e;return"string"==typeof n&&n.trim()});if(n.length>0){let e={};return n.forEach(r=>{let[n,t]=r;e[n]=t}),e}if("string"==typeof e.text){if(e.text.trim())return e.text;continue}}}})(r),u=n||c,x="string"==typeof u&&u.trim()||"object"==typeof u&&null!==u&&Object.values(u).some(e=>"string"==typeof e&&e.trim())?u:void 0;a({type:E.Us.SET_BRANDING,payload:{logo:null!==(e=r.branding.logo)&&void 0!==e?e:"",backgroundImage:null!==(t=r.branding.backgroundImage)&&void 0!==t?t:"",backgroundImageSlice:null!==(l=r.branding.backgroundImageSlice)&&void 0!==l?l:"",primaryBackgroundColor:null!==(i=r.branding.primaryBackgroundColor)&&void 0!==i?i:"",secondaryBackgroundColor:null!==(o=r.branding.secondaryBackgroundColor)&&void 0!==o?o:"",primaryAttribute:null!==(s=r.branding.primaryAttribute)&&void 0!==s?s:"",secondaryAttribute:null!==(d=r.branding.secondaryAttribute)&&void 0!==d?d:"",watermarkText:x}})},[r,n,t.id,a]),null}function O(e){let{bundle:r,onClick:n,language:a="en"}=e,[d,c]=(0,l.useState)(null),[u,x]=(0,l.useState)(null),[g,h]=(0,l.useState)(void 0),[f,m]=(0,l.useState)(!0),[v,b]=(0,l.useState)(null);return((0,l.useEffect)(()=>{let e=!0,n=async()=>{try{m(!0),b(null);let n=await (0,w.r2)(r,{includeTestData:!1});if(!e)return;if(n&&n.overlay){c(n.overlay),h("string"==typeof n.watermarkText?n.watermarkText:void 0);let e=A(n.overlay,r,n.data);x(e)}else b("No overlay data")}catch(r){if(!e)return;b("Error: ".concat(r instanceof Error?r.message:"Unknown error"))}finally{e&&m(!1)}};return n(),()=>{e=!1}},[r.id]),f)?(0,t.jsxs)(s.Z,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:200,sx:{border:1,borderColor:"divider",borderRadius:1,backgroundColor:"background.paper",p:2},children:[(0,t.jsx)(i.Z,{size:40}),(0,t.jsxs)(o.Z,{variant:"body2",sx:{mt:1},children:["Loading ",r.name||r.id]})]}):(0,t.jsx)(s.Z,{sx:{cursor:"pointer",display:"inline-block",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.15)"}},onClick:n,children:(0,t.jsx)(I.Z,{overlay:d||void 0,record:u||void 0,language:a})})}function P(e){let{bundle:r,onClick:n,language:a="en"}=e,[i,o]=(0,l.useState)(null),[s,d]=(0,l.useState)(null),[c,u]=(0,l.useState)(void 0);return(0,l.useEffect)(()=>{let e=!0,n=async()=>{try{let n=await (0,w.r2)(r,{includeTestData:!1});if(!e)return;if(n&&n.overlay){o(n.overlay),u("string"==typeof n.watermarkText?n.watermarkText:void 0);let e=A(n.overlay,r,n.data);d(e)}}catch(r){if(!e)return;console.error("Error loading overlay:",r)}};return n(),()=>{e=!1}},[r.id]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(L,{overlay:i,watermarkText:c,bundle:r}),(0,t.jsx)(O,{bundle:r,onClick:n,language:a})]})}function T(e){let{bundle:r,onClick:n,language:l="en"}=e;return(0,t.jsx)(E.lY,{children:(0,t.jsx)(P,{bundle:r,onClick:n,language:l})})}var z=n(96210);function B(e){var r;let{options:n}=e,[S,I]=(0,l.useState)(""),[E,A]=(0,l.useState)(""),[L,O]=(0,l.useState)(!1),P=(0,C.useRouter)(),{language:B,setLanguage:D}=(0,z.useLanguage)(),N=n.length>0&&void 0!==n[0].ledger,R=(0,l.useMemo)(()=>{let e=(0,w.mO)(n);return e.map(e=>({value:e.value,label:"".concat(e.label," (").concat(e.count,")")}))},[n]),_=(0,l.useMemo)(()=>{let e=(0,w.bV)(n,{ledger:S,searchTerm:E});return e.sort((e,r)=>{let n=e.org||"",t=r.org||"";if(n!==t)return n.localeCompare(t);let l=e.name||"",a=r.name||"";return l.localeCompare(a)})},[n,S,E]),F=(0,l.useMemo)(()=>(0,w._Z)(_),[_]),M=async e=>{O(!0);try{await new Promise(e=>setTimeout(e,300)),P.push("/identifier/".concat(encodeURIComponent(e.id)))}catch(e){O(!1)}},W=S||E;return N?(0,t.jsxs)(s.Z,{children:[(0,t.jsx)(d.Z,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:L,children:(0,t.jsxs)(s.Z,{display:"flex",flexDirection:"column",alignItems:"center",children:[(0,t.jsx)(i.Z,{color:"inherit",size:60}),(0,t.jsx)(o.Z,{variant:"h6",sx:{mt:2},children:"Loading credential details..."})]})}),(0,t.jsxs)(a.Z,{elevation:3,sx:{p:3,mb:3},children:[(0,t.jsx)(o.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"OCA Bundle Explorer"}),(0,t.jsx)(o.Z,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Explore and filter through available credential bundles. Search by name or description, or filter by ledger network."}),(0,t.jsx)(a.Z,{elevation:1,sx:{p:3,mb:3,backgroundColor:"background.paper",borderRadius:2},children:(0,t.jsxs)(c.ZP,{container:!0,spacing:3,alignItems:"flex-start",children:[(0,t.jsx)(c.ZP,{item:!0,xs:12,md:5,children:(0,t.jsx)(u.Z,{fullWidth:!0,label:"Search bundles",placeholder:"Search by name or description...",value:E,onChange:e=>A(e.target.value),variant:"outlined",InputProps:{endAdornment:E?(0,t.jsx)(x.Z,{size:"small",onClick:()=>A(""),sx:{color:"text.secondary","&:hover":{color:"error.main",backgroundColor:"error.main",backgroundColorOpacity:.1}},"aria-label":"Clear search",children:(0,t.jsx)(Z.Z,{fontSize:"small"})}):null},sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}}}})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:3,children:(0,t.jsxs)(g.Z,{fullWidth:!0,children:[(0,t.jsx)(h.Z,{id:"ledger-select-label",children:"Filter by Ledger"}),(0,t.jsxs)(f.Z,{labelId:"ledger-select-label",value:S,label:"Filter by Ledger",onChange:e=>I(e.target.value),sx:{"& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}}},children:[(0,t.jsx)(m.Z,{value:"",children:(0,t.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,t.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:"All Ledgers"})})}),R.map(e=>(0,t.jsx)(m.Z,{value:e.value,children:(0,t.jsx)(s.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,t.jsx)(o.Z,{variant:"body2",children:e.label})})},e.value))]})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsxs)(g.Z,{fullWidth:!0,size:"small",children:[(0,t.jsx)(h.Z,{id:"language-select-label",children:"Language"}),(0,t.jsxs)(f.Z,{labelId:"language-select-label",value:B,label:"Language",onChange:e=>D(e.target.value),sx:{height:"56px","& .MuiOutlinedInput-root":{"&:hover fieldset":{borderColor:"primary.main"}}},children:[(0,t.jsx)(m.Z,{value:"en",children:"English"}),(0,t.jsx)(m.Z,{value:"fr",children:"Fran\xe7ais"})]})]})}),(0,t.jsx)(c.ZP,{item:!0,xs:12,md:2,children:(0,t.jsx)(v.Z,{fullWidth:!0,variant:W?"contained":"outlined",onClick:()=>{I(""),A("")},disabled:!W,startIcon:(0,t.jsx)(Z.Z,{}),sx:{height:"56px",fontWeight:600,textTransform:"none",borderRadius:2,boxShadow:W?2:"none","&:hover":{boxShadow:W?4:2,transform:"translateY(-1px)",transition:"all 0.2s ease-in-out"},"&:disabled":{backgroundColor:"action.disabledBackground",color:"action.disabled",borderColor:"action.disabled",boxShadow:"none"}},children:"Clear Filters"})})]})}),W&&(0,t.jsxs)(s.Z,{sx:{mb:2},children:[(0,t.jsx)(o.Z,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Active filters:"}),(0,t.jsxs)(s.Z,{display:"flex",flexWrap:"wrap",gap:1,children:[E&&(0,t.jsx)(b.Z,{label:'Search: "'.concat(E,'"'),onDelete:()=>A(""),deleteIcon:(0,t.jsx)(Z.Z,{}),variant:"outlined"}),S&&(0,t.jsx)(b.Z,{label:"Ledger: ".concat((null===(r=R.find(e=>e.value===S))||void 0===r?void 0:r.label)||S),onDelete:()=>I(""),deleteIcon:(0,t.jsx)(Z.Z,{}),variant:"outlined"})]})]}),(0,t.jsxs)(o.Z,{variant:"body2",color:"text.secondary",sx:{mb:2},children:[_.length," bundle",1!==_.length?"s":""," found",W&&" (filtered from ".concat(n.length," total)")]})]}),0===_.length?(0,t.jsxs)(a.Z,{elevation:1,sx:{p:4,textAlign:"center"},children:[(0,t.jsx)(o.Z,{variant:"h6",color:"text.secondary",children:"No bundles found"}),(0,t.jsx)(o.Z,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try adjusting your search criteria or clearing the filters."})]}):Object.entries(F).map(e=>{var r;let[n,l]=e;return(0,t.jsxs)(y.Z,{defaultExpanded:!0,sx:{mb:2},children:[(0,t.jsx)(p.Z,{expandIcon:(0,t.jsx)(k.Z,{}),"aria-controls":"".concat(n,"-content"),id:"".concat(n,"-header"),children:(0,t.jsxs)(o.Z,{variant:"h6",component:"div",children:[(null===(r=l[0])||void 0===r?void 0:r.ledgerDisplayName)||n||"Unknown Ledger",(0,t.jsx)(b.Z,{label:l.length,size:"small",sx:{ml:2},color:"primary"})]})}),(0,t.jsx)(j.Z,{children:(0,t.jsx)(c.ZP,{container:!0,spacing:3,children:l.map(e=>(0,t.jsx)(c.ZP,{item:!0,xs:12,sm:6,md:4,lg:4,xl:3,children:(0,t.jsx)(T,{bundle:e,onClick:()=>M(e),language:B})},e.id))})})]},n)})]}):(0,t.jsxs)(a.Z,{elevation:3,sx:{p:4,textAlign:"center"},children:[(0,t.jsx)(i.Z,{size:40,sx:{mb:2}}),(0,t.jsx)(o.Z,{variant:"body1",color:"text.secondary",children:"Loading credential bundles with ledger information..."})]})}function D(){let[e,r]=(0,l.useState)([]),[n,a]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null);return((0,l.useEffect)(()=>{(async function(){try{let e=await (0,w.Ph)();r(e)}catch(e){c(e instanceof Error?e.message:"Failed to load bundle list")}finally{a(!1)}})()},[]),n)?(0,t.jsxs)(s.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:2,children:[(0,t.jsx)(i.Z,{size:50}),(0,t.jsx)(o.Z,{variant:"body1",children:"Loading credential bundles..."})]}):d?(0,t.jsxs)(s.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",gap:2,children:[(0,t.jsx)(o.Z,{variant:"h6",color:"error",children:"Error loading bundles"}),(0,t.jsx)(o.Z,{variant:"body2",color:"text.secondary",children:d})]}):(0,t.jsx)(B,{options:e})}}},function(e){e.O(0,[145,707,418,191,292,971,472,744],function(){return e(e.s=1919)}),_N_E=e.O()}]);