(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[292],{61635:function(){},35883:function(){},24654:function(){},99929:function(e,t,r){"use strict";r.d(t,{Z:function(){return T}});var n=r(57437),o=r(2265),l=r(35252),Text=r(11045),Image=r(73909),i=r(51681),a=r(51099),u=r(86287),s=r(98615),d=r.n(s),c=function(e){var t;let{attribute:r,styles:o}=e;return(0,n.jsx)(Text.Z,{style:o,children:null!==(t=r.label)&&void 0!==t?t:d()(r.name)})},f=function(e){let{attribute:t,styles:r,size:o}=e;switch(t.characterEncoding){case"base64":var l;if(null===(l=t.format)||void 0===l?void 0:l.includes("image"))return(0,n.jsx)(Image.Z,{source:{uri:t.value,height:o,width:o},alt:"Image",style:{marginTop:4}});return null;case"utf-8":if("urn:iso:std:iso:1989"===t.standard){let e=t.value,o=parseInt(e.substring(0,4)),l=parseInt(e.substring(4,6)),i=parseInt(e.substring(6,8)),a=new Date(o,l-1,i);return(0,n.jsx)(Text.Z,{style:r,children:a.toDateString()})}return(0,n.jsx)(Text.Z,{style:r,children:t.value||"•".repeat(10)});default:return(0,n.jsx)(Text.Z,{style:r,children:t.value||"•".repeat(10)})}};function v(e){var t;let{issuer:r,styles:o}=e;return(0,n.jsx)(l.Z,{children:(0,n.jsx)(Text.Z,{style:[null==o?void 0:o.label,null==o?void 0:o.textContainer,{lineHeight:19,opacity:.8,flex:1,flexWrap:"wrap",color:null==o?void 0:null===(t=o.textContainer)||void 0===t?void 0:t.color}],numberOfLines:1,children:r})})}function y(e){var t;let{name:r,styles:o}=e;return(0,n.jsx)(l.Z,{children:(0,n.jsx)(Text.Z,{style:[null==o?void 0:o.normal,null==o?void 0:o.textContainer,{fontWeight:"bold",lineHeight:24,flex:1,flexWrap:"wrap",color:null==o?void 0:null===(t=o.textContainer)||void 0===t?void 0:t.color}],numberOfLines:1,children:r})})}function g(e){var t,r,o,i,a,u,s;let{attribute:d,styles:v}=e;return(0,n.jsxs)(l.Z,{style:[null==v?void 0:v.textContainer,null==v?void 0:v.attributeContainer],children:[(0,n.jsx)(c,{attribute:d,styles:[null!==(i=null==v?void 0:v.labelSubtitle)&&void 0!==i?i:{},null!==(a=null==v?void 0:v.textContainer)&&void 0!==a?a:{},{lineHeight:19,opacity:.8,color:null==v?void 0:null===(t=v.textContainer)||void 0===t?void 0:t.color}]}),"base64"===d.characterEncoding&&(null===(r=d.format)||void 0===r?void 0:r.includes("image"))?(0,n.jsx)(Image.Z,{source:{uri:d.value,height:43.199999999999996,width:43.199999999999996},alt:"Image",style:{marginTop:4}}):(0,n.jsx)(f,{attribute:d,styles:[null!==(u=null==v?void 0:v.normal)&&void 0!==u?u:{},null!==(s=null==v?void 0:v.textContainer)&&void 0!==s?s:{},{lineHeight:24,color:null==v?void 0:null===(o=v.textContainer)||void 0===o?void 0:o.color}]})]})}function m(e){let{styles:t}=e,r=(0,a.TC)();return(0,n.jsx)(l.Z,{style:[null==t?void 0:t.secondaryBodyContainer],children:(null==r?void 0:r.backgroundImageSlice)?(0,n.jsx)(i.Z,{source:null==r?void 0:r.backgroundImageSlice,style:{flexGrow:1},imageStyle:{borderTopLeftRadius:10,borderBottomLeftRadius:10}}):null})}function h(e){var t,r,o;let{credential:i,styles:u}=e,s=(0,a.TC)();return(0,n.jsx)(l.Z,{style:[null==u?void 0:u.logoContainer],children:(null==s?void 0:s.logo)?(0,n.jsx)(Image.Z,{source:null==s?void 0:s.logo,alt:"Logo",resizeMode:"cover",style:{width:43.199999999999996,height:43.199999999999996,borderRadius:8}}):(0,n.jsx)(Text.Z,{style:[null==u?void 0:u.normal,{fontSize:21.599999999999998,fontWeight:"bold",alignSelf:"center"}],children:null===(t=null!==(o=null!==(r=null==i?void 0:i.issuer)&&void 0!==r?r:null==i?void 0:i.name)&&void 0!==o?o:"C")||void 0===t?void 0:t.charAt(0).toUpperCase()})})}function p(e,t){if(e){if("string"==typeof e)return e;if(t&&"object"==typeof e&&e[t])return e[t];if("object"==typeof e){let t=Object.values(e).find(e=>"string"==typeof e&&e.trim());if("string"==typeof t)return t}}}function b(e){var t,r;let{overlay:o,language:i,credential:a,primaryAttribute:u,secondaryAttribute:s,styles:d}=e,c=[];u&&c.push(u),s&&c.push(s);let f=(null==a?void 0:a.issuer)||p(null==o?void 0:null===(t=o.metadata)||void 0===t?void 0:t.issuer,i),m=(null==a?void 0:a.name)||p(null==o?void 0:null===(r=o.metadata)||void 0===r?void 0:r.name,i);return(0,n.jsxs)(l.Z,{style:null==d?void 0:d.primaryBodyContainer,children:[(0,n.jsx)(v,{issuer:f,styles:d}),(0,n.jsx)(y,{name:m,styles:d}),c.map((e,t)=>(0,n.jsx)(g,{attribute:e,styles:d},"".concat(e.name,"_").concat(t)))]})}function C(e){let{styles:t}=e;return(0,n.jsx)(l.Z,{style:[null==t?void 0:t.statusContainer]})}function x(e){let t,r,o,{overlay:i,credential:u,language:s,styles:d}=e,c=(0,a.TC)();(null==c?void 0:c.primaryAttribute)&&(r=w(c.primaryAttribute,i,u,s)),(null==c?void 0:c.secondaryAttribute)&&(o=w(c.secondaryAttribute,i,u,s));let f=null==c?void 0:c.watermarkText;if("string"==typeof f&&f.trim())t=f;else if(f&&"object"==typeof f){if(s&&f[s]&&"string"==typeof f[s]&&f[s].trim())t=f[s];else{let e=Object.values(f).find(e=>"string"==typeof e&&e.trim());e&&(t=e)}}return t&&t.trim()||(t=void 0),(0,n.jsxs)(l.Z,{style:null==d?void 0:d.cardContainer,children:[t?(0,n.jsx)(l.Z,{style:{position:"absolute",left:0,top:0,right:0,bottom:0,pointerEvents:"none",zIndex:1,overflow:"hidden"},children:Array.from({length:20}).map((e,r)=>(0,n.jsx)(l.Z,{style:{flexDirection:"row",marginVertical:0,transform:"rotate(-25deg)"},children:Array.from({length:20}).map((e,o)=>(0,n.jsx)(Text.Z,{style:{color:"#ffffff",opacity:.1,fontWeight:"bold",fontSize:16,letterSpacing:.5,marginHorizontal:8,textTransform:"uppercase",textAlign:"center"},children:t},"wm_".concat(r,"_").concat(o)))},"wmr_".concat(r)))}):null,(0,n.jsx)(m,{styles:d}),(0,n.jsx)(h,{credential:u,styles:d}),(0,n.jsx)(b,{overlay:i,language:s,credential:u,primaryAttribute:r,secondaryAttribute:o,styles:d}),(0,n.jsx)(C,{styles:d})]})}function w(e,t,r,n){let o=null==r?void 0:r.getAttribute(e),l=null==t?void 0:t.getAttribute(e);if(l){var i,a,s;let e=null!==(i=null==o?void 0:o.name)&&void 0!==i?i:"",t=null!==(a=null==o?void 0:o.mimeType)&&void 0!==a?a:"",r=null!==(s=null==o?void 0:o.value)&&void 0!==s?s:"";return new u.DisplayAttribute({name:e,mimeType:t,value:r},l,null!=n?n:"en")}}var T=function(e){let{overlay:t,record:r,language:i}=e,s=(0,a.TC)(),d=function(e){let t=(null==e?void 0:e.primaryBackgroundColor)||"#003366",r=(0,u.textColorForBackground)(t);return{container:{backgroundColor:t,borderRadius:10},cardContainer:{flexDirection:"row",minHeight:118.80000000000001,position:"relative"},primaryBodyContainer:{flexShrink:1,padding:18,margin:-1,marginLeft:-25.199999999999996,position:"relative",zIndex:2},secondaryBodyContainer:{width:43.199999999999996,borderTopLeftRadius:10,borderBottomLeftRadius:10,backgroundColor:((null==e?void 0:e.backgroundImageSlice)?"rgba(0, 0, 0, 0)":null==e?void 0:e.secondaryBackgroundColor)||"rgba(0, 0, 0, 0.24)",position:"relative",zIndex:2},logoContainer:{top:18,left:-25.199999999999996,width:43.199999999999996,height:43.199999999999996,backgroundColor:"rgba(255, 255, 255, 1)",borderRadius:8,justifyContent:"center",alignItems:"center",position:"relative",zIndex:2},statusContainer:{backgroundColor:"rgba(0, 0, 0, 0)",borderTopRightRadius:10,borderBottomLeftRadius:10,height:43.199999999999996,width:43.199999999999996,justifyContent:"center",alignItems:"center",position:"relative",zIndex:2},textContainer:{color:r,flexShrink:1},attributeContainer:{marginTop:15},label:{fontSize:14,fontWeight:"bold"},labelSubtitle:{fontSize:14,fontWeight:"normal"},normal:{fontSize:18,fontWeight:"normal"}}}(s),[c,f]=(0,o.useState)();(0,o.useMemo)(()=>{t&&r&&f(new u.CredentialFormatter(t,r))},[t,r]);let v=null==c?void 0:c.localizedCredential(null!=i?i:"en");return(0,n.jsx)(l.Z,{style:[d.container,{width:360}],children:(0,n.jsx)(x,{overlay:t,credential:v,language:i,styles:d})})}},51099:function(e,t,r){"use strict";r.d(t,{TC:function(){return f},Us:function(){return o},bV:function(){return v},lY:function(){return c}});var n,o,l,i=r(57437),a=r(2265);(n=o||(o={})).SET_BRANDING="setBranding",n.LOGO="logo",n.BACKGROUND_IMAGE="backgroundImage",n.BACKGROUND_IMAGE_SLICE="backgroundImageSlice",n.PRIMARY_BACKGROUND_COLOR="primaryBackgroundColor",n.SECONDARY_BACKGROUND_COLOR="secondaryBackgroundColor",n.PRIMARY_ATTRIBUTE="primaryAttribute",n.SECONDARY_ATTRIBUTE="secondaryAttribute",n.ISSUED_DATE_ATTRIBUTE="issuedDateAttribute",n.EXPIRY_DATE_ATTRIBUTE="expiryDateAttribute",n.WATERMARK_TEXT="watermarkText",(l||(l={})).V10="aries/overlays/branding/1.0";let u={captureBase:"",type:"aries/overlays/branding/1.0",digest:"",logo:"",backgroundImage:"",backgroundImageSlice:"",primaryBackgroundColor:"",secondaryBackgroundColor:"",primaryAttribute:"",secondaryAttribute:"",issuedDateAttribute:void 0,expiryDateAttribute:void 0,watermarkText:void 0},s=(0,a.createContext)(null),d=(0,a.createContext)(null);function c(e){let{children:t}=e,[r,n]=(0,a.useReducer)(y,u);return(0,i.jsx)(s.Provider,{value:r,children:(0,i.jsx)(d.Provider,{value:n,children:t})})}function f(){return(0,a.useContext)(s)}function v(){return(0,a.useContext)(d)}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setBranding":case"logo":case"backgroundImage":case"backgroundImageSlice":case"primaryBackgroundColor":case"secondaryBackgroundColor":case"primaryAttribute":case"secondaryAttribute":case"watermarkText":return{...e,...t.payload};default:return e}}},29996:function(e,t,r){"use strict";r.d(t,{r2:function(){return v},Ph:function(){return c},bV:function(){return m},mO:function(){return g},_Z:function(){return y}});var n=r(86287),o=r(41775);class l{static async fetchRawOverlayBundle(e){let t=await fetch(e);return await t.json()}static async fetchOverlayBundle(e,t){let r=await this.fetchRawOverlayBundle(t);return this.createOverlayBundle(e,r[0])}static async fetchOverlayBundleData(e){try{let r=e.replace("OCABundle.json","testdata.csv"),n=new AbortController,l=setTimeout(()=>n.abort(),2e3);try{var t;let e=await fetch(r,{signal:n.signal,cache:"no-cache"});if(clearTimeout(l),!e.ok)return{};let i=e.headers.get("content-type");if(!i||!i.includes("text/csv"))return{};let a=await e.text();if(!a.trim()||!a.includes(","))return{};let u=(0,o.Q)(a,{delimiter:", ",columns:!0,skip_empty_lines:!0,relax_column_count:!0});return null!==(t=u[0])&&void 0!==t?t:{}}catch(e){if(clearTimeout(l),e instanceof Error&&("AbortError"===e.name||e.message.includes("fetch")||e.message.includes("network")))return{};throw e}}catch(e){return{}}}static createOverlayBundle(e,t){return new n.OverlayBundle(e,t)}}let i="https://bcgov.github.io/aries-oca-bundles",a=new Map,u={"candy:prod":"candy-prod","candy:dev":"candy-dev","candy:test":"candy-test","CANDY:PROD":"candy-prod","CANDY:DEV":"candy-dev","CANDY:TEST":"candy-test","CANDY-Prod":"candy-prod","CANDY-Dev":"candy-dev","CANDY-Test":"candy-test","Candy:Prod":"candy-prod","Candy:Dev":"candy-dev","Candy:Test":"candy-test","bcovrin:test":"bcovrin-test","bcovrin:prod":"bcovrin-prod","BCOVRIN:TEST":"bcovrin-test","BCOVRIN:PROD":"bcovrin-prod","BCOVRIN-Test":"bcovrin-test","BCOVRIN-Prod":"bcovrin-prod","Bcovrin:Test":"bcovrin-test","Bcovrin:Prod":"bcovrin-prod",mainnet:"mainnet",testnet:"testnet",devnet:"devnet",MAINNET:"mainnet",TESTNET:"testnet",DEVNET:"devnet","localhost:test":"localhost-test","local:test":"localhost-test"};function s(e){if(!e)return"unknown";let t=u[e]||e.toLowerCase().replace(/[^a-z0-9]/g,"-");return t}async function d(e){if(a.has(e))return a.get(e);try{let t=e.replace("OCABundle.json","README.md"),r="".concat("https://raw.githubusercontent.com/bcgov/aries-oca-bundles/main","/").concat(t),n=await fetch(r);if(!n.ok){let t={};return a.set(e,t),t}let o=await n.text(),l=function(e){let t,r;let n=e.split("\n");for(let e=0;e<n.length;e++){let o=n[e].trim();if(o.includes("| Identifier")&&o.includes("| Location")&&o.includes("| URL")){for(let o=e+2;o<n.length;o++){let e=n[o].trim();if(e&&e.includes("|")&&!e.includes("---")){let n=e.split("|").map(e=>e.trim()).filter(e=>e);if(n.length>=3){t=n[1],r=n[2];break}}}break}}return{ledger:t,ledgerUrl:r}}(o);return a.set(e,l),l}catch(r){let t={};return a.set(e,t),t}}async function c(){try{let e=await fetch(i+"/ocabundleslist.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=await e.text(),r=JSON.parse(t),n=[];for(let e=0;e<r.length;e+=5){let t=r.slice(e,e+5),o=t.map(async e=>{let t=await d(e.ocabundle),r=t.ledger?s(t.ledger):void 0,n=t.ledger?function(e){if(!e)return"Unknown Ledger";let t=s(e);switch(t){case"candy-prod":return"Candy Production";case"candy-dev":return"Candy Development";case"candy-test":return"Candy Test";case"bcovrin-test":return"BCovrin Test";case"bcovrin-prod":return"BCovrin Production";case"mainnet":return"Mainnet";case"testnet":return"Testnet";case"devnet":return"Development Network";default:return e.split(/[-_:]/).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}}(t.ledger):void 0,o=t.ledgerUrl;return{...e,ledger:t.ledger,ledgerUrl:o,ledgerDisplayName:n,ledgerNormalized:r}}),l=await Promise.all(o);n.push(...l),e+5<r.length&&await new Promise(e=>setTimeout(e,100))}return n}catch(e){throw Error("Failed to fetch Overlay Bundle List: ".concat(e instanceof Error?e.message:"Unknown error"))}}function f(e){if(e&&"object"==typeof e){for(let t of["watermarkText","watermark"])if(e.hasOwnProperty(t)){if("string"==typeof e[t]){if(e[t].trim())return e[t];return}if("object"==typeof e[t]&&null!==e[t]){if(e[t].text&&"string"==typeof e[t].text){if(e[t].text.trim())return e[t].text;return}if(!e[t].text){let r=Object.values(e[t]);if(r.length>0&&r.every(e=>"string"==typeof e&&e.trim()))return e[t];if(r.length>0&&r.every(e=>"string"==typeof e&&!e.trim()))return}}}if(e.watermark&&"string"==typeof e.watermark&&e.watermark.trim())return e.watermark;if(!e.hasOwnProperty("watermark")||"string"!=typeof e.watermark||e.watermark.trim()){if(e.branding){let t=f(e.branding);if(t)return t}if(e.metadata){let t=f(e.metadata);if(t)return t}}}}async function v(e,t){try{let r,n,o;e.url=i+"/"+e.ocabundle;let a=(null==t?void 0:t.includeTestData)!==!1,u=l.fetchOverlayBundle(e.id,e.url),s=l.fetchRawOverlayBundle(e.url),d=a?l.fetchOverlayBundleData(e.url):Promise.resolve({}),[c,v,y]=await Promise.allSettled([u,d,s]);if("fulfilled"===c.status&&(r=c.value),a?"fulfilled"===v.status&&(n=v.value):n={},"fulfilled"===y.status)try{let e=y.value;if(Array.isArray(e)&&e.length>0){let t=e[0];if(t.overlays&&Array.isArray(t.overlays))for(let e of t.overlays){let t=f(e);if(t){o=t;break}}o||(o=f(t))}}catch(e){console.error("Error extracting watermark from raw data:",e)}else"rejected"===y.status&&console.error("Failed to fetch raw overlay data:",y.reason);if(!o&&r&&(o=f(r)),!r)throw Error("Failed to fetch Overlay Bundle for ".concat(e.id,": ").concat("rejected"===c.status?c.reason.message:"Unknown error"));return{overlay:r,data:n,watermarkText:o}}catch(t){throw Error("Failed to fetch Overlay Bundle Data for ".concat(e.id,": ").concat(t instanceof Error?t.message:"Unknown error"))}}function y(e){let t=e.reduce((e,t)=>{let r=t.ledgerNormalized||"unknown";return e[r]||(e[r]=[]),e[r].push(t),e},{});Object.values(t).forEach(e=>{e.sort((e,t)=>(e.name||e.id).localeCompare(t.name||t.id))});let r=["candy-prod","candy-test","candy-dev","sovrn-mainnet","sovrin-stagingnet","bcovrin-test"],n={};for(let e of r)t[e]&&(n[e]=t[e]);let o=Object.keys(t).filter(e=>!r.includes(e));for(let e of(o.sort((e,r)=>{var n,o,l,i;let a=(null===(o=t[e])||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.ledgerDisplayName)||e,u=(null===(i=t[r])||void 0===i?void 0:null===(l=i[0])||void 0===l?void 0:l.ledgerDisplayName)||r;return a.localeCompare(u)}),o))n[e]=t[e];return n}function g(e){let t=e.reduce((e,t)=>{let r=t.ledgerNormalized||"unknown";return e[r]=(e[r]||0)+1,e},{}),r=["candy-prod","candy-test","candy-dev","sovrn-mainnet","sovrin-stagingnet","bcovrin-test"],n=Object.entries(t).map(t=>{var r;let[n,o]=t;return{value:n,label:(null===(r=e.find(e=>e.ledgerNormalized===n))||void 0===r?void 0:r.ledgerDisplayName)||n,count:o}});return n.sort((e,t)=>{let n=r.indexOf(e.value),o=r.indexOf(t.value);return -1!==n||-1!==o?-1===n?1:-1===o?-1:n-o:e.label.localeCompare(t.label)}),n}function m(e,t){return e.filter(e=>{if(t.ledger&&e.ledgerNormalized!==t.ledger)return!1;if(t.searchTerm){let r=t.searchTerm.toLowerCase(),n=[e.name||"",e.desc||"",e.org||"",e.id||""].map(e=>e.toLowerCase()),o=n.some(e=>e.includes(r));if(!o)return!1}return!0})}}}]);